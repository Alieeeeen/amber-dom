!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.amberdom=t()}(this,function(){"use strict";function e(e){return"[object Array]"===Object.prototype.toString.call(e)}var t=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var n=/^ev\-([a-z]+)/,r=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tagName=t,this.props=n,this.children=r,this.key=n.key||void 0,this.count=r.reduce(function(t,n){return n instanceof e?n.count+t+1:t+1},0),this.cleanups=[],delete n.key}return t(e,[{key:"render",value:function(){var t=/(SVG|svg)/.test(this.tagName)?document.createElementNS("http://www.w3.org/2000/svg","svg"):document.createElement(this.tagName),r=this.props;for(var o in r)if(r.hasOwnProperty(o)){var i=o.match(n);if(i)try{var a="function"==typeof r[o]?r[o]:new Function("("+r[o]+")(...arguments);");this.cleanups.push({evName:i[1],handler:a}),t.addEventListener(i[1],a,!1)}catch(e){console.log("Warning: listener for event '"+_event[1]+"' isn't working.\n              If you're specifying this handler in string, please specify a function.")}else"className"===o?t.setAttribute("class",r[o]):t.setAttribute(o,r[o])}return this.children.forEach(function(n){var r;if("string"==typeof n)r=document.createTextNode(n);else if(n instanceof e)r=n.render();else{var o=n.render||void 0;"function"==typeof o?(o.bind(n),r=o()):r=n.render()}t.appendChild(r)}),this.$el=t,t}},{key:"detachEventListeners",value:function(){var e=this;this.cleanups.forEach(function(t){e.$el.removeEventListener(t.evName,t.handler)})}}]),e}(),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=/([\.#]?[^\s#.]+)/;var a="REPLACE",s="REORDER",c="PROPS",f="TEXT";function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function l(e,t){return e.map(function(e,n){return t&&e?"function"==typeof t?t(e):e[t]:void 0})}function d(e){var t=!0,n=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){if(void 0!==o.value)return!1}}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}return!0}var v=a,h=s,p=f,y=c;function m(e,t,n,r){var o,i,a=[];return void 0===t?n:"string"==typeof e&&"string"==typeof t?(e===t||(n[r]=[{type:p,text:t}]),n):(o=function(e,t){var n,r={};for(var o in t)t.hasOwnProperty(o)&&(n=t[o],e[o]!==n&&(r[o]=n));for(var i in e)i in t||(r[i]=void 0);return r}(e.props||{},t.props||{}),e.tagName!==t.tagName||e.key!==t.key?(a.push({type:v,node:t}),n[r]=a,n):(i=o,0!==Object.keys(i||{}).length&&a.push({type:y,props:o}),function(e,t,n,r,o){var i=function(e,t,n){var r=l(e,n),o=l(t,n),i=e.length,a=t.length,s=e.slice(),c=[];if(d(r)&&d(o)){var f=void 0,v=void 0,h=void 0,p=void 0;if(i===a)return{diffed:s,moves:c};i>a?(f="REMOVE",v=a,h=i,s.splice(a,i-a)):a>i&&(f="INSERT",v=i,h=a,p=t.slice(i),s=[].concat(u(s),u(p)));for(var y=v;y<h;y++)c.push({type:f,index:y,item:t[y]||null});return{diffed:s,moves:c}}var m=new Array(i).fill(0);return o.forEach(function(e,n){var o=r.indexOf(e);if(-1===o)c.push({type:"INSERT",index:n,item:t[n]}),s.splice(n,0,t[n]),m[i-1]++;else{for(var a=o,f=i-1;f>=o;f--)a+=m[f];if(n===a)return;c.push({type:"MOVE",from:a,to:n});var u=s.splice(a,1)[0];s.splice(n,0,u),m[o]++}}),r.forEach(function(e,t){-1===o.indexOf(e)&&(c.push({type:"REMOVE",index:a}),s.splice(a,1))}),{diffed:s,moves:c}}(e,t,"key");e=i.diffed,i.moves.length&&r.push({type:h,moves:i.moves});var a=null,s=o;e.forEach(function(e,r){t[r];s=a&&a.count?a.count+s+1:s+1,m(e,t[r],n,s),a=e})}(e.children||[],t.children||[],n,a,r),a.length&&(n[r]=a),n))}var g=a,N=s,b=c,E=f;return{h:function(t,n){for(var a=arguments.length,s=Array(a>2?a-2:0),c=2;c<a;c++)s[c-2]=arguments[c];var f;if(n||(n={}),s||(s=[]),(n instanceof r||"string"==typeof n)&&(s.unshift(n),n={}),e(n)&&(s=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n),[s]),n={}),n.style&&"object"===o(n.style)){var u="";for(var l in n.style)u+=l+": "+n.style[l]+"; ";n.style=u}return n.className&&e(n.className)&&(n.className=n.className.join(" ")),"string"==typeof t?((f=function(e){var t={};return e.split(i).forEach(function(e){""!==e&&(t.tagName?"."===e[0]?(t.className||(t.className=[])).push(e.substr(1)):"#"===e[0]&&(t.id=e.substr(1)):t.tagName=e)}),t.className&&t.className.join(" "),t}(t)).className&&(n.className||(n.className=""),n.className+=" "+f.className),new r(f.tagName,n,s)):"function"==typeof t?new t(n,s):void 0},diff:function(e,t){var n={};return m(e,t,n,0),n},patch:function(e,t){!function e(t,n,o){var i=n[o.index];if(i&&function(e,t){var n=void 0,o=void 0;t.forEach(function(t){switch(t.type){case g:if((o=t.node instanceof r||t.node.render?t.node.render():"string"==typeof t.node?document.createTextNode(t.node):new Error("You might be using a custom node, if so, you need to provide a render function."))instanceof Error)throw o;e.parentNode.replaceChild(o,e);break;case b:for(var i in n=t.props)void 0===n[i]?e.removeAttribute("className"!==i?i:"class"):e.setAttribute("className"!==i?i:"class",n[i]);break;case E:e.textContent?e.textContent=t.text:e.nodeValue=t.text;break;case N:!function(e,t){var n=e.childNodes,r=void 0;t.forEach(function(t){switch(t.type){case"INSERT":try{r=t.item.render(),e.insertBefore(r,n[t.index])}catch(e){console.log("A custom-defined node should have a render method, otherwise it must be defined as a function.")}break;case"REMOVE":e.removeChild(n[t.index]);break;case"MOVE":e.insertBefore(n[t.from],n[t.to])}})}(e,t.moves);break;default:throw new Error("Some internal error.")}})}(t,i),t.childNodes){var a=[].slice.call(t.childNodes);a.forEach(function(t,r){o.index++,e(t,n,o)})}}(e,t,{index:0})},VNode:r}});
//# sourceMappingURL=amberdom.browser.js.map
