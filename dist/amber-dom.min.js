!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.amberdom=t()}(this,function(){"use strict";function e(e){return"[object Array]"===Object.prototype.toString.call(e)}const t=/(svg|SVG)/,n=/^xlink:(.*)$/,i="http://www.w3.org/2000/svg",o="http://www.w3.org/1999/xlink";function s(e,t){let n,i,o;for(let s in t){if("function"==typeof(o=t[s]))n=o;else if(o&&o.shift&&(n=o.shift())&&"function"==typeof n)i=o;else{if(void 0!==o){console.warn(`Failed to add ${s} listener.`);continue}n=void 0,i=void 0}(e.__listeners__||(e.__listeners__={}))[s]={handler:n,params:i},e.addEventListener(s,l)}}function l(e){let t,n,i=e.currentTarget.__listeners__;i&&(t=i[e.type])&&(n=t.params,(t=t.handler)&&null!=n?t(e,...n):t&&t&&t(e))}function r(e,t){let n=e.__style__;if(t&&"string"!=typeof t&&"string"!=typeof n||(e.style.cssText=t||""),t&&"object"==typeof t){if("string"!=typeof n)for(let e in n)e in value||(element.style[e]="");for(let e in value)element.style[e]=value[e]}e.__style__=t}let a={events:{name:"events",creating:s,updating:s},style:{name:"style",creating:r,updating:r}};class c{constructor(e,n,o){n||(n={}),o||(o=[]);let s=n.namespace||(t.test(e)?i:void 0);this.tagName=s?e:e.toUpperCase(),this.attrs={},this.modAttrs={},this.key=n.key,this.children=o;for(let e in n)e in a?this.modAttrs[e]=n[e]:this.attrs[e]=n[e];s&&function e(t,n){const i=t.children;t.ns=n;for(let t=0,o=i.length;t<o;t++){let o=i[t];o instanceof c&&"foreignObject"!==o.tagName&&e(o,n)}}(this,s)}}const f=/([\.#]?[^\s#.]+)/,u=[];function d(e,t,n){e.insertBefore(t,n)}function p(e,t,n){let i;return e&&t.parentNode===e?(n&&e.replaceChild(n,t)&&(i=n),e.removeChild(t)&&(i=t)):t&&n&&(i=n),i}function m(e){if(null==e)return null;if("string"==typeof e)return document.createTextNode(e);const t=e.ns,n=e.attrs,i=e.modAttrs,o=e.tagName,s=e.children,l=t?document.createElementNS(t,o):document.createElement(o);l.__attrs__=n;for(const e in n)g(l,e,n[e]);s.forEach((e,t)=>{let n;e instanceof c||"string"==typeof e?n=m(e):console.warn(`Unrecognizable node: ${e}`),l.appendChild(n)});for(const e in i)a[e].creating(l,i[e]);return l}function g(e,t,i){let s,l=!("svg"!==e.tagName);switch(t){case"key":e.__key__=i;break;case"namespace":break;case"children":case"innerHTML":s=y(e,t),console.warn(s);break;default:if(i&&!l&&t in e&&"type"!==t)try{e[t]=i||void 0}catch(n){s=y(e,t),console.warn(s)}else l=l&&!!t.match(n),i&&l?e.setAttributeNS(o,t,i):!i&&l?e.removeAttributeNS(o,t):i?e.setAttribute(t,i):e.removeAttribute(t)}}function h(e){if(e&&e.childNodes&&e.childNodes.length){let t=e.firstChild,n=e.lastChild;for(;t!==n;)p(e,n),n=e.lastChild;p(e,t)}}function y(e,t){let n=e.tagName;return n=e.id?`${n}#${e.id}`:n,`Failed to set "${t}" on element "${n=e.className?`${n}.${e.className.join(".")}`:n}".`}function N(e,t,n){if(null!=t&&"boolean"!=typeof t||(t=""),3===e.nodeType&&"string"==typeof t){(e.textContent||e.nodeValue)!==t&&(e.textContent=t)}else if(n||_(e,t)){!function(e,t){let n=t.attrs,i=e.__attrs__;if(null==i){i=e.__attrs__=null==i?{}:i;for(let t=e.attributes,n=t.length;n--;)i[t[n].name]=t[n].value}for(const t in i)!i[t]||n&&n[t]||g(e,t,i[t]=void 0);for(const t in n)t in i&&n[t]===("value"===t||"checked"===t?e[t]:old[t])||g(e,t,i[t]=n[t])}(e,t),function(e,t){const n=e.childNodes,i=t.children,o=n.length,s=i.length;if(0===s&&0===o)return;if(1===s){let t,s=i[0];if(1===o&&_(n[0],s))N(n[0],s,!0);else{for(let e=1;e<o;e++)if(_(n[e],s)){N(n[e],s,!0),t=n[e];break}void 0===t&&(t=m(s)),h(e),e.appendChild(t)}}else if(0!==o&&s>1){let t,o,l=0,r=s-1,a=e.firstChild,c=e.lastChild,f=i[l],u=i[r];for(;l<=r&&a!==c;){for(;l<=r&&a!==c&&a&&f&&_(a,f);)N(a,f,!0),a=a.nextSibling,f=i[++l];for(;l<=r&&a!==c&&c&&u&&_(c,u);)N(c,u,!0),c=c.previousSibling,u=i[--r];if(a===c||l>=r)break;_(a,u)?(N(a,u,!0),o=a,a=a.nextSibling,d(e,o,c.nextSibling),u=i[--r]):_(c,f)?(N(c,f,!0),o=c,c=c.previousSibling,d(e,o,a),f=i[++l]):(null==t&&(t=b(n,a,c)),null==(o=t[f.key])?(o=m(f),d(e,o,a)):(N(o,startChild),t[o.key]=void 0,d(e,o,a)),f=i[++l])}if((l<=r||a!==c||a===c)&&a){for(;a!==c;)o=a,a=a.nextSibling,p(e,o);if(_(c,i[r])){if(N(c,i[r],!0),l===r)return;r--}else o=c,c=c.nextSibling,p(e,o);for(let t=l;t<=r;t++)d(e,m(i[t]),c)}}else if(0!==o)h(e);else if(0!==s)for(let t=0,n=i[0];t<s;t++)e.appendChild(m(n))}(e,t);for(const n in t.modAttrs)a[n].updating(e,t.modAttrs[n])}else{let n=m(t);e=p(e.parentNode,e,n)}return e}function _(e,t){return e.key===t.key&&e.tagName===t.tagName}function b(e,t,n){const i={};for(t===n&&t.key&&(i[String(t.key)]=t);t!==n;)null!=t.key&&(i[String(t.key)]=t),t=t.nextSibling;return t===n&&t.key&&(i[String(t.key)]=t),i}return{h:function(t,n){if("function"==typeof t)return new t(...Array.prototype.slice.call(arguments,1));let i,o,s=[],l=!1;n||(n={});for(let e=arguments.length;e-- >2;)u.push(arguments[e]);(n instanceof c||"string"==typeof n||"number"==typeof n||"boolean"==typeof n||e(n))&&(u.push(n),n={});let r=0;for(;u.length;)if((o=u.pop())&&void 0!==o.pop)for(let e=o.length;e--;)u.push(o[e]);else o="number"==typeof(o="boolean"==typeof(o=null==o?"":o)?"":o)?String(o):o,l&&"string"==typeof o?s[s.length-1]+=o:(o instanceof c&&null==o.attrs.key&&(o.key=o.attrs.key=r++),s.push(o),l="string"==typeof o);if("text"===t)return 0===s.length?"":s.join("");if("string"==typeof t)return n.className&&e(n.className)&&(n.className=n.className.join(" ")),(i=function(e){const t={};return e.split(f).forEach(e=>{""!==e&&(t.tagName?"."===e[0]?(t.className||(t.className=[])).push(e.substr(1)):"#"===e[0]&&(t.id=e.substr(1)):t.tagName=e)}),t.className&&(t.className=t.className.join(" ")),t}(t)).className&&(n.className=n.className?n.className+" "+i.className:i.className),i.id&&(n.id=n.id?n.id:i.id),new c(i.tagName,n,s);throw new Error(`Unrecognized selector: ${t}.`)},patch:function(e,t){return(e instanceof Element||e instanceof Text)&&(e=N(e,t)),e},VNode:c,createElement:m}});
//# sourceMappingURL=amber-dom.min.js.map
