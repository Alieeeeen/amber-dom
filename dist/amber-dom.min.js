!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.amberdom={})}(this,function(e){"use strict";function t(e){return"[object Array]"===Object.prototype.toString.call(e)}const n=/^ev\-([a-z]+)/,o=/(svg|SVG)/,s=/^xlink:(.*)$/,i="http://www.w3.org/2000/svg",r="http://www.w3.org/1999/xlink";class l{constructor(e,t,n){this.tagName=e.toUpperCase(),this.props=t||{},this.children=n||[],this.key=t&&t.key;let s=t&&t.namespace||(o.test(e)?i:void 0);if(s&&function e(t,n){const o=t.children;t.ns=n,t.tagName=t.tagName?t.tagName.toLocaleLowerCase():void 0;for(let t=0,s=o.length;t<s;t++){let s=o[t];s instanceof l&&e(s,n)}}(this,s),function(e){let t;for(let n=0,o=e.length;n<o;n++)(t=e[n])instanceof l&&(t.key=t.props.key=null!=t.props.key?t.props.key:n)}(this.children),t.hooks){for(const e in t.hooks)this[e]=t.hooks[e];delete t.hooks}}}const a=/([\.#]?[^\s#.]+)/,c=[];function f(e,n){if("function"==typeof e)return new e(...Array.prototype.slice.call(arguments,1));let o,s,i=[],r=!1;n||(n={});for(let e=arguments.length;e-- >2;)c.push(arguments[e]);for((n instanceof l||"string"==typeof n||"number"==typeof n||"boolean"==typeof n||t(n))&&(c.push(n),n={});c.length;)if((s=c.pop())&&void 0!==s.pop)for(let e=s.length;e--;)c.push(s[e]);else s="number"==typeof(s="boolean"==typeof(s=null==s?"":s)?"":s)?String(s):s,r&&"string"==typeof s?i[i.length-1]+=s:(i.push(s),r="string"==typeof s);if("text"===e)return 0===i.length?"":i.join("");if("string"==typeof e)return n.className&&t(n.className)&&(n.className=n.className.join(" ")),(o=function(e){const t={};return e.split(a).forEach(e=>{""!==e&&(t.tagName?"."===e[0]?(t.className||(t.className=[])).push(e.substr(1)):"#"===e[0]&&(t.id=e.substr(1)):t.tagName=e)}),t.className&&(t.className=t.className.join(" ")),t}(e)).className&&(n.className=n.className?n.className+" "+o.className:o.className),o.id&&(n.id=n.id?n.id:o.id),new l(o.tagName,n,i);throw new Error(`Unrecognized selector: ${e}.`)}function p(e,t,n){e.insertBefore(t,n)}function d(e,t){if(t.parentNode===e){const n=t._listeners;if(n)for(const e in n)t.removeEventListener(e,n[e]);e.removeChild(t)}return t}function u(e){if("string"==typeof e||"number"==typeof e)return document.createTextNode(e);const t=e.tagName,o=e.props,s=e.children,i=e.ns,r=i?document.createElementNS(i,t):document.createElement(t);r.$props=o;for(const e in o){const t=e.match(n);if(t){const n="function"==typeof o[e]?o[e]:new Error(`Handler to ${t[1]} is not a function`);n instanceof Error&&console.warn(`Failed to add listener for ${t[1]}: ${n.message}`),(r._listeners||(r._listeners={}))[t[1]]=n,r.addEventListener(t[1],n,!1)}else h(r,e,o[e],!!i)}return s.forEach((e,t)=>{let n;e instanceof l||"string"==typeof e?n=u(e):console.warn(`Unrecognizable node: ${e}`),r.appendChild(n)}),e.created&&e.created(r),r}function h(e,t,n,o){let i,l;switch(t="className"===t?"class":t){case"key":e.key=n;break;case"style":if(l=e.$style,n&&"string"!=typeof n&&"string"!=typeof l||(e.style.cssText=n||""),n&&"object"==typeof n){if("string"!=typeof l)for(let t in l)t in n||(e.style[t]="");for(let t in n)e.style[t]=n[t]}e.$style=n||"";break;case"class":e.className=n||"";break;case"children":console.warn(`Failed to set "children" on element ${e.tagName}.`);break;case"innerHTML":console.warn(`Failed to set "innerHTML" on a "${e.tagName.toLocaleLowerCase()}".`);break;default:if(!o&&t in e&&"type"!==t){try{e[t]=n||""}catch(n){console.warn(`Failed to set attribute: ${t} on element "${e.id?e.tagName+e.id:e.tagName}"`)}null==n&&e.removeAttribute(t)}else i=o&&!!t.match(s),n&&i?e.setAttributeNS(r,t,n):!n&&i?e.removeAttributeNS(r,t):n?e.setAttribute(t,n):e.removeAttribute(t)}}function m(e){if(e&&e.childNodes&&e.childNodes.length){let t=e.firstChild,n=e.lastChild;for(;t!==n;)d(e,n),n=e.lastChild;d(e,t)}}function g(e,t){return(e instanceof Element||e instanceof Text)&&(e=y(e,t)),e}function y(e,t,n){if(null!=t&&"boolean"!=typeof t||(t=""),3!==e.nodeType||"string"!=typeof t&&"number"!=typeof t)if(n||N(e,t))!function(e,t){const n=t.props;let o=e.$props;const s=!!e.ns;if(null==o||(i=o,0===Object.keys(i||{}).length)){o=e.$props=null==o?{}:o;for(let t=e.attributes,n=t.length;n--;)o[t[n].name]=t[n].value}var i;for(const t in o)!o[t]||n&&n[t]||h(e,t,o[t]=void 0,s);for(const t in n)t in o&&n[t]===("value"===t||"checked"===t?e[t]:o[t])||h(e,t,n[t],s)}(e,t),function(e,t){const n=e.childNodes,o=t.children,s=n.length,i=o.length;if(0===i&&0===s)return;if(1===i){let t,i=o[0];if(1===s&&N(n[0],i))y(n[0],i,!0);else{for(let e=1;e<s;e++)if(N(n[e],i)){y(n[e],i,!0),t=n[e];break}void 0===t&&(t=u(i)),m(e),e.appendChild(t)}}else if(0!==s&&i>1){let t,s,r=0,l=i-1,a=e.firstChild,c=e.lastChild,f=o[r],h=o[l];for(;r<=l&&a!==c;){for(;r<=l&&a!==c&&a&&f&&N(a,f);)y(a,f,!0),a=a.nextSibling,f=o[++r];for(;r<=l&&a!==c&&c&&h&&N(c,h);)y(c,h,!0),c=c.previousSibling,h=o[--l];if(a===c||r>=l)break;N(a,h)?(y(a,h,!0),s=a,a=a.nextSibling,p(e,s,c.nextSibling),h=o[--l]):N(c,f)?(y(c,f,!0),s=c,c=c.previousSibling,p(e,s,a),f=o[++r]):(null==t&&(t=b(n,a,c)),null==(s=t[f.key])?(s=u(f),p(e,s,a)):(y(s,startChild),t[s.key]=void 0,p(e,s,a)),f=o[++r])}if((r<=l||a!==c||a===c)&&a){for(;a!==c;)s=a,a=a.nextSibling,d(e,s);if(N(c,o[l])){if(y(c,o[l],!0),r===l)return;l--}else s=c,c=c.nextSibling,d(e,s);for(let t=r;t<=l;t++)p(e,u(o[t]),c)}}else if(0!==s)m(e);else if(0!==i)for(let t=0,n=o[0];t<i;t++)e.appendChild(u(n))}(e,t);else{let n=u(t);o=e.parentNode,n=n,i=e,o&&n.parentNode===o&&o.replaceChild(n,i)}else{(e.textContent||e.nodeValue)!==t&&(e.textContent=t)}var o,s,i;return e}function N(e,t){return e.key===t.key&&e.tagName===t.tagName}function b(e,t,n){const o={};for(t===n&&t.key&&(o[String(t.key)]=t);t!==n;)null!=t.key&&(o[String(t.key)]=t),t=t.nextSibling;return t===n&&t.key&&(o[String(t.key)]=t),o}const k={h:f,patch:g,VNode:l,createElement:u};e.default=k,e.h=f,e.patch=g,e.VNode=l,e.createElement=u,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=amber-dom.min.js.map
