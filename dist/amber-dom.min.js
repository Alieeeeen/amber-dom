!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.amberdom=t()}(this,function(){"use strict";function e(e){return"[object Array]"===Object.prototype.toString.call(e)}const t=/^ev\-([a-z]+)/,n=/(svg|SVG)/,o=/^xlink:(.*)$/,s="http://www.w3.org/2000/svg",i="http://www.w3.org/1999/xlink";class r{constructor(e,t,o){this.tagName=e.toUpperCase(),this.props=t||{},this.children=o||[],this.key=t&&t.key;let i,l=t&&t.namespace||(n.test(e)?s:void 0);l&&function e(t,n){const o=t.children;t.ns=n,t.tagName=t.tagName?t.tagName.toLocaleLowerCase():void 0;for(let t=0,s=o.length;t<s;t++){let s=o[t];s instanceof r&&e(s,n)}}(this,l),function(e){let t;for(let n=0,o=e.length;n<o;n++)(t=e[n])instanceof r&&(t.key=t.props.key=null!=t.props.key?t.props.key:n)}(this.children),t.hooks&&(this.hooks=i=t.hooks,delete t.hooks,((i=i.vnode)||"function"==typeof i)&&i(vnode))}}const l=/([\.#]?[^\s#.]+)/,a=[];function c(e,t,n){e.insertBefore(t,n)}function f(e,t,n){let o,s,i=t.$hooks;if(e&&t.parentNode===e){if(i&&(o=i.beforeRemove)&&"function"==typeof o&&!1===o(t))return;n&&e.replaceChild(n,t)&&(s=n),e.removeChild(t)&&(s=t),i&&(o=i.removed)&&"function"==typeof o&&o(t)}else t&&n?s=n:console.warn(`The element ${n.id?n.tagName+"#"+n.id:n.tagName} wasn't mounted on document.`);return s}function u(e){if("string"==typeof e||"number"==typeof e)return document.createTextNode(e);const n=e.tagName,o=e.props,s=e.children,i=e.ns,l=i?document.createElementNS(i,n):document.createElement(n);let a;l.$props=o;for(const e in o){const n=e.match(t);if(n){const t="function"==typeof o[e]?o[e]:new Error(`Handler to ${n[1]} is not a function`);t instanceof Error&&console.warn(`Failed to add listener for ${n[1]}: ${t.message}`),(l.$listeners||(l.$listeners={}))[n[1]]=t,l.addEventListener(n[1],t,!1)}else d(l,e,o[e],!!i)}return s.forEach((e,t)=>{let n;e instanceof r||"string"==typeof e?n=u(e):console.warn(`Unrecognizable node: ${e}`),l.appendChild(n)}),(a=e.hooks)&&(a=a.created)&&"function"==typeof a&&a(l),l.$hooks&&(l.$hooks=e.hooks),delete o.$hooks,l}function d(e,t,n,s){let r,l;switch(t="className"===t?"class":t){case"key":e.key=n;break;case"style":if(l=e.$style,n&&"string"!=typeof n&&"string"!=typeof l||(e.style.cssText=n||""),n&&"object"==typeof n){if("string"!=typeof l)for(let t in l)t in n||(e.style[t]="");for(let t in n)e.style[t]=n[t]}n&&(e.$style=n);break;case"class":e.className=n||"";break;case"children":console.warn(`Failed to set "children" on element ${e.tagName}.`);break;case"innerHTML":console.warn(`Failed to set "innerHTML" on a "${e.tagName.toLocaleLowerCase()}".`);break;default:if(!s&&t in e&&"type"!==t){try{e[t]=n||""}catch(n){console.warn(`Failed to set attribute: ${t} on element "${e.id?e.tagName+e.id:e.tagName}"`)}null==n&&e.removeAttribute(t)}else r=s&&!!t.match(o),n&&r?e.setAttributeNS(i,t,n):!n&&r?e.removeAttributeNS(i,t):n?e.setAttribute(t,n):e.removeAttribute(t)}}function p(e){if(e&&e.childNodes&&e.childNodes.length){let t=e.firstChild,n=e.lastChild;for(;t!==n;)f(e,n),n=e.lastChild;f(e,t)}}function h(e,t,n){let o,s=e.$hooks;if(null!=t&&"boolean"!=typeof t||(t=""),3!==e.nodeType||"string"!=typeof t&&"number"!=typeof t)if(n||m(e,t)){if(s&&(o=s.beforeUpdate)&&"function"==typeof o&&!1===o(e,t))return;!function(e,t){let n=t.props,o=e.$props,s=!!e.ns;if(null==o||(i=o,0===Object.keys(i||{}).length)){o=e.$props=null==o?{}:o;for(let t=e.attributes,n=t.length;n--;)o[t[n].name]=t[n].value}var i;for(const t in o)!o[t]||n&&n[t]||d(e,t,o[t]=void 0,s);for(const t in n)t in o&&n[t]===("value"===t||"checked"===t?e[t]:o[t])||d(e,t,n[t],s)}(e,t),s&&(o=s.updated)&&"function"==typeof o&&o(e,t),function(e,t){const n=e.childNodes,o=t.children,s=n.length,i=o.length;if(0===i&&0===s)return;if(1===i){let t,i=o[0];if(1===s&&m(n[0],i))h(n[0],i,!0);else{for(let e=1;e<s;e++)if(m(n[e],i)){h(n[e],i,!0),t=n[e];break}void 0===t&&(t=u(i)),p(e),e.appendChild(t)}}else if(0!==s&&i>1){let t,s,r=0,l=i-1,a=e.firstChild,d=e.lastChild,p=o[r],g=o[l];for(;r<=l&&a!==d;){for(;r<=l&&a!==d&&a&&p&&m(a,p);)h(a,p,!0),a=a.nextSibling,p=o[++r];for(;r<=l&&a!==d&&d&&g&&m(d,g);)h(d,g,!0),d=d.previousSibling,g=o[--l];if(a===d||r>=l)break;m(a,g)?(h(a,g,!0),s=a,a=a.nextSibling,c(e,s,d.nextSibling),g=o[--l]):m(d,p)?(h(d,p,!0),s=d,d=d.previousSibling,c(e,s,a),p=o[++r]):(null==t&&(t=y(n,a,d)),null==(s=t[p.key])?(s=u(p),c(e,s,a)):(h(s,startChild),t[s.key]=void 0,c(e,s,a)),p=o[++r])}if((r<=l||a!==d||a===d)&&a){for(;a!==d;)s=a,a=a.nextSibling,f(e,s);if(m(d,o[l])){if(h(d,o[l],!0),r===l)return;l--}else s=d,d=d.nextSibling,f(e,s);for(let t=r;t<=l;t++)c(e,u(o[t]),d)}}else if(0!==s)p(e);else if(0!==i)for(let t=0,n=o[0];t<i;t++)e.appendChild(u(n))}(e,t)}else{let n=u(t);e=f(e.parentNode,e,n)}else{(e.textContent||e.nodeValue)!==t&&(e.textContent=t)}return e}function m(e,t){return e.key===t.key&&e.tagName===t.tagName}function y(e,t,n){const o={};for(t===n&&t.key&&(o[String(t.key)]=t);t!==n;)null!=t.key&&(o[String(t.key)]=t),t=t.nextSibling;return t===n&&t.key&&(o[String(t.key)]=t),o}return{h:function(t,n){if("function"==typeof t)return new t(...Array.prototype.slice.call(arguments,1));let o,s,i=[],c=!1;n||(n={});for(let e=arguments.length;e-- >2;)a.push(arguments[e]);for((n instanceof r||"string"==typeof n||"number"==typeof n||"boolean"==typeof n||e(n))&&(a.push(n),n={});a.length;)if((s=a.pop())&&void 0!==s.pop)for(let e=s.length;e--;)a.push(s[e]);else s="number"==typeof(s="boolean"==typeof(s=null==s?"":s)?"":s)?String(s):s,c&&"string"==typeof s?i[i.length-1]+=s:(i.push(s),c="string"==typeof s);if("text"===t)return 0===i.length?"":i.join("");if("string"==typeof t)return n.className&&e(n.className)&&(n.className=n.className.join(" ")),(o=function(e){const t={};return e.split(l).forEach(e=>{""!==e&&(t.tagName?"."===e[0]?(t.className||(t.className=[])).push(e.substr(1)):"#"===e[0]&&(t.id=e.substr(1)):t.tagName=e)}),t.className&&(t.className=t.className.join(" ")),t}(t)).className&&(n.className=n.className?n.className+" "+o.className:o.className),o.id&&(n.id=n.id?n.id:o.id),new r(o.tagName,n,i);throw new Error(`Unrecognized selector: ${t}.`)},patch:function(e,t){return(e instanceof Element||e instanceof Text)&&(e=h(e,t)),e},VNode:r,createElement:u}});
//# sourceMappingURL=amber-dom.min.js.map
