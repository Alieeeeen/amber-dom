!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.amberdom={})}(this,function(e){"use strict";function t(e){return"[object Array]"===Object.prototype.toString.call(e)}const n=/^ev\-([a-z]+)/,o=/(svg|SVG)/,s=/^xlink:(.*)$/,i="http://www.w3.org/2000/svg",r="http://www.w3.org/1999/xlink";class l{constructor(e,t,n){this.tagName=e.toUpperCase(),this.props=t||{},this.children=n||[],this.key=t&&t.key;let s=t&&t.namespace||(o.test(e)?i:void 0);s&&function e(t,n){const o=t.children;t.ns=n;for(let t=0,s=o.length;t<s;t++){let s=o[t];s instanceof l&&e(s,n)}}(this,s)}}const a=/([\.#]?[^\s#.]+)/,c=[];function f(e,n){if("function"==typeof e)return new e(Array.prototype.slice.call(arguments,1));let o,s,i=[];n||(n={});for(let e=arguments.length;e-- >2;)c.push(arguments[e]);for((n instanceof l||"string"==typeof n||"number"==typeof n||"boolean"==typeof n||t(n))&&(c.push(n),n={});c.length;)if((s=c.pop())&&void 0!==s.pop)for(let e=s.length;e--;)c.push(s[e]);else s="number"==typeof(s="boolean"==typeof(s=null==s?"":s)?"":s)?String(s):s,i.push(s);if("text"===e)return 0===i.length?"":i.join(" ");if("string"==typeof e)return n.className&&t(n.className)&&(n.className=n.className.join(" ")),(o=function(e){const t={};return e.split(a).forEach(e=>{""!==e&&(t.tagName?"."===e[0]?(t.className||(t.className=[])).push(e.substr(1)):"#"===e[0]&&(t.id=e.substr(1)):t.tagName=e)}),t.className&&t.className.join(" "),t}(e)).className&&(n.className=n.className?n.className+" "+o.className:o.className),o.id&&(n.id=n.id?n.id:o.id),new l(o.tagName,n,i);throw new Error(`Unrecognized selector: ${e}.`)}function u(e,t,n){e.insertBefore(t,n)}function p(e,t){return t.parentNode===e&&e.removeChild(t),t}function d(e){if("string"==typeof e||"number"==typeof e)return document.createTextNode(e);const t=e.tagName,o=e.props,s=e.children,i=e.ns,r=i?document.createElementNS(i,t):document.createElement(t);r.$props=o;for(const e in o){const t=e.match(n);if(t){const n="function"==typeof o[e]?o[e]:new Error(`Handler to ${t[1]} is not a function`);n instanceof Error&&console.warn(`Failed to add listener for ${t[1]}: ${n.message}`),(r._listeners||(r._listeners={}))[t[1]]=n,r.addEventListener(t[1],n,!1)}else m(r,e,o[e],!!i)}return s.forEach(e=>{let t;e instanceof l||"string"==typeof e?t=d(e):console.warn(`Unrecognizable node: ${e}`),r.appendChild(t)}),e.created&&e.created(r),r}function m(e,t,n,o){let i,l;switch(t="className"===t?"class":t){case"key":e.key=n;break;case"style":if(l=e.$style,n&&"string"!=typeof n&&"string"!=typeof l||(e.style.cssText=n||""),n&&"object"==typeof n){if("string"!=typeof l)for(let t in l)t in n||(e.style[t]="");for(let t in n)e.style[t]=n[t]}e.$style=n||"";break;case"class":e.className=n||"";break;case"children":console.warn(`Failed to set "children" on element ${e.tagName}.`);break;case"innerHTML":console.warn(`Failed to set "innerHTML" on a "${e.tagName.toLocaleLowerCase()}".`);break;default:if(!o&&t in e&&"type"!==t){try{e[t]=n||""}catch(n){console.warn(`Failed to set attribute: ${t} on element "${e.id?e.tagName+e.id:e.tagName}"`)}null==n&&e.removeAttribute(t)}else i=o&&!!(t=t.match(s)[1]),n&&i?e.setAttributeNS(r,t,n):!n&&i?e.removeAttributeNS(r,t):n?e.setAttribute(t,n):e.removeAttribute(t)}}function h(e,t){(e instanceof Element||e instanceof Text)&&y(e,t)}function y(e,t){if(null!=t&&"boolean"!=typeof t||(t=""),3!==e.nodeType||"string"!=typeof t&&"number"!=typeof t)g(e,t)?(function(e,t){const n=t.props;let o=e.$props;const s=!!e.ns;if(null==o||(i=o,0===Object.keys(i||{}).length)){o=e.$props=null==o?{}:o;for(let t=e.attributes,n=t.length;n--;)o[t[n].name]=t[n].value}var i;for(const t in o)!o[t]||n&&n[t]||m(e,t,o[t]=void 0,s);for(const t in n)t in o&&n[t]===("value"===t||"checked"===t?e[t]:o[t])||m(e,t,n[t],s)}(e,t),function(e,t){const n=e.childNodes,o=t.children,s=n.length,i=o.length;if(0===i&&0===s)return;if(0!==s&&0!==i){let t,s,r=0,l=i-1,a=e.firstChild,c=e.lastChild,f=o[r],m=o[l];for(;r<=l&&a!==c;){for(;g(a,f);)y(a,f),a=a.nextSibling,f=o[++r];for(;g(c,m);)y(c,m),c=c.previousSibling,m=o[--l];if(a===c||r===l)break;g(a,m)?(y(a,m),s=a,a=a.nextSibling,u(e,s,c.nextSibling),m=o[--l]):g(c,f)?(y(c,f),s=c,c=c.previousSibling,u(e,s,a.previousSibling),f=o[++r]):(null==t&&(t=b(n,a,c)),null==(s=t[f.key])?(s=d(f),u(e,s,a)):(y(s=n[idxInOld],startChild),t[s.key]=void 0,u(e,s,a)),f=o[++r])}if(r<=l||a!==c)if(a!==c){for(;a!==c;)p(e,a),a=a.nextSibling;p(e,a)}else for(let t=r;t<=l;t++)u(e,d(o[t]),c)}else if(0!==s){let t=n.lastChild,o=n.firstChild;for(;t!==o;)p(e,t),t=t.previousSibling;t===o&&p(e,t)}else if(0!==i)for(let t=0,n=o[0];t<i;t++)e.appendChild(d(n))}(e,t)):(n=e.parentNode,o=d(t),s=e,o.parentNode===n&&n.replaceChild(o,s));else{(e.textContent||e.nodeValue)!==t&&(e.textContent=t)}var n,o,s}function g(e,t){return e.key===t.key&&e.tagName===t.tagName}function b(e,t,n){const o={};for(t===n&&t.key&&(o[String(t.key)]=t);t!==n;)null!=t.key&&(o[String(t.key)]=t),t=t.nextSibling;return t===n&&t.key&&(o[String(t.key)]=t),o}const N={h:f,patch:h,VNode:l,createElement:d};e.default=N,e.h=f,e.patch=h,e.VNode=l,e.createElement=d,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=amber-dom.min.js.map
